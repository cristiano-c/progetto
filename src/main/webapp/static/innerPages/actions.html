<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create a DO recipe</title>
</head>
<body data-ng-controller="ifCreatorActionController">

<!-- Actions -->
<div class="container">

    <h1 class="page-header"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Choose an action
        <small class="animate-if" data-ng-show="!modifyButton">Step 5/6</small>
    </h1>

    <!-- GCalendar -->
    <div class="container" style="padding-top: 4%">


        <div class="row">

            <h1><img src="/progetto/static/images/gcal.png" style="width:42px;height:42px;border:0;"> GCalendar </h1>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <h2>
                        <img src="/progetto/static/images/gcalendarChannel/new-event.png"
                             style="width:42px;height:42px;border:0;"/> Create new event
                    </h2>
                    <p>
                        This will create a new event in response to te trigger you chose.
                    </p>
                    <!--
                     <p>
                         <a class="btn btn_next5" href="#action1Gcalendar">Continue <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a></a>
                     </p>
                     -->

                    <p>
                        <a class="btn btn_next2" data-ng-show="!googleLogged" data-toggle="modal"
                           data-target="#loginGoogleModal" data-ng-click="routeListener('action1Gcalendar')">Continue<span
                                class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                    <p>
                        <a class="btn btn_next2" href="#action1Gcalendar" data-ng-show="googleLogged">Continue<span
                                class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>


                </div>
            </div>
        </div>
    </div>

    <img src="/progetto/static/images/divider.png" height="100" width="100" class="img-responsive center-block"/>

    <!-- GMail -->
    <div class="container">


        <div class="row">

            <h1><img src="/progetto/static/images/gmail.ico" style="width:42px;height:42px;border:0;"> GMail </h1>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <h2>
                        <img src="/progetto/static/images/gmailChannel/send-email.png"
                             style="width:42px;height:42px;border:0;"> Send email
                    </h2>
                    <p>
                        Send an email to an Address. Email content is coptional.
                    </p>

                    <!--
                    <p>
                        <a class="btn btn_next5" href="#gMailAction">Continue <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                    -->

                    <p>
                        <a class="btn btn_next2" data-ng-show="!googleLogged" data-toggle="modal"
                           data-target="#loginGoogleModal" data-ng-click="routeListener('gMailAction')">Continue<span
                                class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                    <p>
                        <a class="btn btn_next2" href="#gMailAction" data-ng-show="googleLogged">Continue<span
                                class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>


                </div>
            </div>
        </div>
    </div>

    <img src="/progetto/static/images/divider.png" height="100" width="100" class="img-responsive center-block"/>

    <!-- Twitter -->
    <div class="container">


        <div class="row">

            <h1><img src="/progetto/static/images/twitter.png" style="width:42px;height:42px;border:0;"> Twitter </h1>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <h2>
                        <img src="/progetto/static/images/twitterChannel/new-tweet.png"
                             style="width:42px;height:42px;border:0;"> New tweet
                    </h2>
                    <p>
                        Post a new tweet with the specified Text.
                    </p>
                    <p>
                        <a class="btn btn_next2" data-ng-show="!twitterLogged" data-toggle="modal"
                           data-target="#loginTwitterModal" data-ng-click="routeListener('Action1Twitter')">Login in Twitter
                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                    <p>
                        <a class="btn btn_next2" href="#Action1Twitter" data-ng-show="twitterLogged">Continue <span
                                class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                </div>
                <div class="col-md-6">
                    <h2>
                        <img src="/progetto/static/images/twitterChannel/direct-message.png"
                             style="width:42px;height:42px;border:0;"> New private message
                    </h2>
                    <p>
                        Send a new private message to a certain User with some Text.
                    </p>
                    <p>
                        <a class="btn btn_next2" data-ng-show="!twitterLogged" data-toggle="modal"
                           data-target="#loginTwitterModal" data-ng-click="routeListener('Action2Twitter')">Login in Twitter
                            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                    <p>
                        <a class="btn btn_next2" href="#Action2Twitter" data-ng-show="twitterLogged">Continue <span
                                class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
                    </p>
                </div>
            </div>
        </div>
    </div>


    <hr>
    <div class="row text-center">
        <h3>or</h3>
    </div>


    <div class="row text-center" style="padding-top: 2%">
        <a type="submit" class="btn btn-danger btn-large  animate-if" href="#createRecipeAction"
           data-ng-show="!modifyButton"
        ><h4>Back</h4></a>

        <a type="submit" class="btn btn-danger btn-large  animate-if" href="#choseModify"
           data-ng-show="modifyButton"
        ><h4>Back</h4></a>


    </div>
</div>


</div>

</body>

<script>

    var uri = decodeURIComponent(window.location.hash);
    var param = (uri).split("?");
    var trig;
    var act;
    if (param[1] != null) {
        var tokens = param[1].split("&");
        var vardec = JSON.parse(CryptoJS.AES.decrypt(tokens[0].split("=")[1], "Secret Passphrase").toString(CryptoJS.enc.Utf8));
        count = vardec.count;
        setChooseAx = vardec.setChooseAx;
        modifyVar = vardec.modifyVar;
        modifyCountVar = vardec.modifyCountVar;
        flagTriggerDone = vardec.flagTriggerDone;
        importFlag = vardec.importFlag;
        descriptionRecipeGlobal = vardec.descriptionRecipeGlobal;
        idRecipe = vardec.idRecipe;
        iftttLogin = vardec.iftttLogin;
        if (tokens[1] != null && CryptoJS.AES.decrypt(tokens[1].split("trigger=")[1], "Secret Passphrase").toString(CryptoJS.enc.Utf8).localeCompare("") != 0) {
            trig = tokens[1].split("trigger=")[1];
            var dec = CryptoJS.AES.decrypt(trig.toString(), "Secret Passphrase").toString(CryptoJS.enc.Utf8);
            modulinoj1 = JSON.parse(dec);
            console.log(modulinoj1)
        }
        if (tokens[2] != null && CryptoJS.AES.decrypt(tokens[2].split("action=")[1], "Secret Passphrase").toString(CryptoJS.enc.Utf8).localeCompare("") != 0) {
            act = tokens[2].split("action=")[1];
            var dec1 = CryptoJS.AES.decrypt(act.toString(), "Secret Passphrase").toString(CryptoJS.enc.Utf8);
            modulinoj2 = JSON.parse(dec1);
            console.log(modulinoj2)
        }
    }

    importFlag = false;
    if (setChooseAx == 5) {
        if (iftttLogin == false) {
            url = "#home";
            window.location.replace(url);
        }

    }
    else {
        modifyCountVar = 0;
        if (iftttLogin == false) {
            url = "#home";
            window.location.replace(url);
            count = 0;
            flagTriggerDone = "0";
        }
        else {
            if (count == 4) {
                count++;
            }
            else {
                if (count < 4) {
                    url = "#createRecipeAction";
                    window.location.replace(url);
                }

            }
        }
    }

</script>

</html>