<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body ng-controllger="createRecipeActionController">

<!-- Page Content -->
<div class="container">
    <!-- /.row -->

    <!-- Projects Row -->
    <div class="row">
        <div class="col-md-3">
        </div>
        <div class="col-md-6 portfolio-item">
            <h1 class="page-header"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Recipe creator
                <small>Step 4/6</small>
            </h1>
            <a class="btn_next4" href="#createDO">
                <img class="img-responsive" src="/progetto/static/images/action.png" alt="">
            </a>
            <h3>
                <a class="btn_next4" href="#createDO"><span class="glyphicon glyphicon-record" aria-hidden="true"></span> Action</a>
            </h3>
            <p>The actions are the second part of a recipe.</p>


            <!--
            <a  type="submit" class="btn btn-danger pull-left"   href="#allTriggers"

            >Back</a>

            -->

            <botton  type="submit" class="btn btn-danger pull-left"  ng-click="backPersonalTrigger()"

            >Back</botton>



            <a type="submit"  class="btn btn-primary pull-right"  href="#createDO"
            >Next</a>

        </div>
    </div>
    <!-- /.row -->


</div>
<br>
<br>
<br>

</body>

<script>

	var uri = decodeURIComponent(window.location.hash);
	var param = (uri).split("?");
	var trig;
	var act;
	if(param[1]!=null) {
		var tokens = param[1].split("&");
		var vardec = JSON.parse(CryptoJS.AES.decrypt(tokens[0].split("=")[1], "Secret Passphrase").toString(CryptoJS.enc.Utf8));
		count = vardec.count;
		setChooseAx = vardec.setChooseAx;
		modifyVar = vardec.modifyVar;
		modifyCountVar = vardec.modifyCountVar;
		flagTriggerDone = vardec.flagTriggerDone;
		importFlag = vardec.importFlag;
		descriptionRecipeGlobal = vardec.descriptionRecipeGlobal;
		idRecipe = vardec.idRecipe;
		iftttLogin = vardec.iftttLogin;
		if(tokens[1]!=null) {
			trig = tokens[1].split("trigger=")[1];			
			var dec = CryptoJS.AES.decrypt(trig.toString(), "Secret Passphrase").toString(CryptoJS.enc.Utf8);
			modulinoj1 = JSON.parse(dec);
			console.log(modulinoj1)
		}
		if(tokens[2]!=null) {
			act = tokens[2].split("action=")[1];  
			var dec1 = CryptoJS.AES.decrypt(act.toString(), "Secret Passphrase").toString(CryptoJS.enc.Utf8);
			modulinoj2 = JSON.parse(dec1);
			console.log(modulinoj2)
			
		}
	}

    importFlag = false
    modifyCountVar = 0;
    if(iftttLogin == false)
    {
        url = "#home";
        window.location.replace(url);
        count = 0;
        flagTriggerDone="0";
    }
    else {

        if (count == 3)
        {
            count++;
        }
        else {
            if (count < 3) {
                url = "#allTriggers";
                window.location.replace(url);
            }

        }
    }



</script>

</html>